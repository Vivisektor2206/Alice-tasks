name: –ú–æ–π –ø–µ—Ä–≤—ã–π CI

on: push

jobs:
  hello-world:
    runs-on: ubuntu-latest
    
    steps:
      - name: –°–∫–∞—á–∞—Ç—å –∫–æ–¥
        uses: actions/checkout@v4

      - name: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        run: echo "–ü—Ä–∏–≤–µ—Ç! –ü–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç!"

      - name: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Node.js
        run: node --version

      - name: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ index.html
        run: |
          if [ ! -f index.html ]; then
            echo "‚ö†Ô∏è –§–∞–π–ª index.html –Ω–µ –Ω–∞–π–¥–µ–Ω!"
            exit 1
          fi

      - name: –í–∞–ª–∏–¥–∞—Ü–∏—è HTML (—á–µ—Ä–µ–∑ tidy)
        run: |
          sudo apt-get update
          sudo apt-get install -y tidy
          echo "üöÄ –ù–∞—á–∏–Ω–∞—é –ø—Ä–æ–≤–µ—Ä–∫—É HTML..."
          tidy -q -e index.html
          echo "‚úÖ HTML –≤–∞–ª–∏–¥–µ–Ω!"


      - name: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∑–∞–∫—Ä—ã—Ç—ã–µ —Ç–µ–≥–∏)
        run: |
          echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML..."
          grep -q "<[^>]*>" index.html && echo "–¢–µ–≥–∏ –Ω–∞–π–¥–µ–Ω—ã" || echo "–ù–µ—Ç —Ç–µ–≥–æ–≤!"
          if grep -q "<[a-zA-Z][^>]*>[^<]*$" index.html; then
            echo "‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Ç–µ–≥–∏!"
            exit 1
          fi
